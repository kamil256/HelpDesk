@model HelpDesk.Models.TicketsCreateViewModel
@using HelpDesk.Entities

@{
    ViewBag.Title = "New ticket";
}

<style>
    .full-width-container {
        background-color: #F5EECD;
        padding: 30px 0;
        margin-bottom: 40px;
    }

        .full-width-container h1 {
            text-align: center;
            margin: 0;
        }

        .full-width-container hr {
            border-color: #E3D179;
            margin-top: 20px;
            margin-bottom: 0;
            border-top-left-radius: 200px 1px;
            border-top-right-radius: 200px 1px;
        }

    .wide {
        width: 75%;
        max-width: 75%;
    }
</style>

<div class="full-width-container">
    <div class="container">
        <h1>Add new ticket</h1>
        <hr />        
    </div>
</div>
<div class="container">
    @using (Html.BeginForm(@*"Create", "Tickets", FormMethod.Get*@))
    {
        @Html.AntiForgeryToken()

        <div class="form-horizontal">
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            @Html.HiddenFor(model => model.RequestedByID)
            <div class="form-group">
                <label class="control-label col-md-2">Requestor</label>
                <div class="col-md-10">
                    <input value="@Model.Requestor.FirstName @Model.Requestor.LastName (@Model.Requestor.Email)" id="requestorInp" class="form-control pull-left wide" disabled="disabled" />
                    <span class="pull-left">&nbsp;</span>
                    <button id="find-requestor-btn" class="btn btn-warning pull-left" onclick="event.preventDefault(); $('#findRequestorDialog').dialog('open');">Change</button>
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.CategoryID, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.DropDownList("CategoryID", Model.Categories, new { @class = "form-control wide", id = "arequestorsList" })
                    @Html.ValidationMessageFor(model => model.CategoryID, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Title, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Title, new { htmlAttributes = new { @class = "form-control wide" } })
                    @Html.ValidationMessageFor(model => model.Title, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Content, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.TextAreaFor(model => model.Content, 10, 10, new { @class = "form-control wide" })
                    @Html.ValidationMessageFor(model => model.Content, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Create" class="btn btn-warning" />
                </div>
            </div>
        </div>
    }
</div>

@Html.Partial("_FindRequestorPartial")